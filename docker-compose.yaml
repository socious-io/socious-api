version: '3'

services:
  postgres:
    container_name: 'socious-pg'
    image: 'postgres:14.4-alpine'
    environment:
      POSTGRES_USER: 'socious'
      POSTGRES_PASSWORD: 'passwd'
      PGDATA: '/data/postgres'
    volumes:
      - '../postgres:/data/postgres'
    expose:
      - '5432'
    ports:
      - '5432:5432'
    restart: 'always'

  nats:
    container_name: 'socious-nats'
    image: 'nats'
    environment:
      TOKEN: 'secret'
    ports:
      - '4222:4222'
      - '8222:8222'
    restart: 'always'

  nats-ui:
    container_name: 'socious-nats-ui'
    image: 'ghcr.io/nats-nui/nui'
    ports:
      - '31311:31311'
    restart: 'always'
    volumes:
      - '../nui/db:/db'
      - '../nui/creds:/nats-creds:ro'

networks:
  default:
    driver: bridge
